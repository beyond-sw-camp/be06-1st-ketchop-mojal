# be06-1st-ketchop-mojal

<br>
<br>

<div align=center>
<h3>Mojal</h3>
<h4>1팀 - 👽한별, 🐹구은주, 🐨최정완, 🦊도지민, 🤖안준홍</h4>
</div>

<br>

<div align=center>
	<h2>📚 Tech Stack 📚</h2>
	<p>✨ Platforms & Languages ✨</p>
</div>
<div align="center">
	<!--
	<img src="https://img.shields.io/badge/vuejs-%2335495e.svg?style=flat&logo=vuedotjs&logoColor=%234FC08D" />
	<img src="https://img.shields.io/badge/HTML5-E34F26?style=flat&logo=HTML5&logoColor=white" />
	<img src="https://img.shields.io/badge/CSS3-1572B6?style=flat&logo=CSS3&logoColor=white" />
	<img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=flat&logo=JavaScript&logoColor=white" />
	-->
	<br>
	<img src="https://img.shields.io/badge/SpringBoot-6DB33F?style=flat&logo=SpringBoot&logoColor=white" />
        <img src="https://img.shields.io/badge/Java-007396?style=flat&logo=Conda-Forge&logoColor=white" />
	<!-- 
	<img src="https://img.shields.io/badge/jQuery-0769AD?style=flat&logo=jQuery&logoColor=white" />
	<img src="https://img.shields.io/badge/Bootstrap-7952B3?style=flat&logo=Bootstrap&logoColor=white" />
	-->
	<br>
	<img src="https://img.shields.io/badge/MariaDB-003545?style=flat&logo=MariaDB&logoColor=white" />
	<!--
	<img src="https://img.shields.io/badge/Thymeleaf-%23005C0F.svg?style=flat&logo=Thymeleaf&logoColor=white" />
	<img src="https://img.shields.io/badge/Mybatis-000000?style=flat&logo=Fluentd&logoColor=white" />
	-->
</div>
<br>
<div align=center>
	<h2>🛠 Tools 🛠</h2>
</div>
<div align=center>
	<img src="https://img.shields.io/badge/IntelliJIDEA-000000.svg?style=flat&logo=intellij-idea&logoColor=white" />
	<img src="https://img.shields.io/badge/GitHub-181717?style=flat&logo=GitHub&logoColor=white" />
	<!--
	<img src="https://img.shields.io/badge/Eclipse%20IDE-2C2255?style=flat&logo=EclipseIDE&logoColor=white" />
	<img src="https://img.shields.io/badge/apache-%23D42029.svg?style=flat&logo=apache&logoColor=white" />
	-->
</div>
<br>
<br>

# 📌재능교환/나눔 서비스 기획서

## 1. 서비스 소개

모잘 서비스는 지식과 재능을 서로 공유하며 양방향으로 나아가 지식과 재능의 확장을 제공한다. 이는 다양한 사람들과의 교류를 통해 새로운 경험과 공유에 대한 가치를 일깨우고 동시에 자신의 재능을 어필하고 싶은 요구를 충족시켜주는 것이 목표이다. </br>
모잘 서비스는 크게 두 가지 기능을 제공한다. </br>
재능 교환 서비스는 물물교환 처럼 자신이 가진 재능과 상대방의 재능을 맞교환하는 방식의 서비스다. 채팅을 통한 협의 하에 교환 상대가 결정할 수 있으며 그들만의 방식으로 재능을 교환한다. 이를 통해 커뮤니케이션을 활성화하고 서로가 부족한 재능을 채워줄 수 있다.</br>
재능 나눔 서비스는 자신의 재능을 무료로 제공해 주는 서비스다. 이는 영리적 목적보다는 경험의 기회가 적은 현대 사회인들을 위해 경험을 쌓기 위한 기회를 제공하는데 중점을 둔다. 교육 경험을 쌓고 싶은 사람, 교육장 오픈 전 교육 실력을 향상하거나 초기 회원을 모으고싶은 사람 등이 주 타켓층으로, 제공하고싶은 재능을 선착순으로 제한된 인원에게만 무료로 제공해주는 서비스다. 


## 2. 서비스 목표

- **다양한 커뮤니케이션 활성화** : <br>   본인이 가지고 있는 재능을 교환하면서 여러사람과 커뮤니케이션을 활성화시켜 양방향 소통이 활발해질 수 있도록 기여함.
- **본인의 역량을 발휘할 수 있는 경험 제공** : <br> 다양한 경험을 쌓고싶은 현대사회인에게 쉽게 접근할 수 있는 기회를 제공.
- **재능을 나눔으로써 공유의 장 생성** : <br>  자신의 재능을 경험의 기회가 적은 사람에게 제공하고 다른 경험을 제공받음으로써 공유의 가치를 확장.
- **교육의 진입 장벽 낮춤** : <br> 전문가들만 교육 할 수 있었던 기존 체계에서 무경력 일반인들에게도 기회 제공. 


## 3. 서비스 차별화 전략

- **재능 교환** : <br> 상업적 목적이 아닌 '재능 교환'이라는 비영리성 목표를 둔다.
- **타임어택 기능** : <br> 게시물 마감 시간을 두어 이벤트성 기분을 느끼게하여 재미를 제공한다. 

## 4. 서비스 배경

<img src="https://github.com/beyond-sw-camp/be06-1st-ketchop-mojal/blob/dev/assets/image/project_background.PNG" width="60%" />

2023년도 기사에 따르면 숨고, 크몽과 같은 재능마켓 앱의 설치 건수가 4년 사이에 약 8배정도 폭증하였다고 한다. 특히 숨고는 2019년 이용자가 5만명이었는데 4년간 연평균 이용자가 5배나 늘어난 25만명을 기록하였다. <br>
IT 업계에선 재능 마켓 앱을 통해 거래되는 재능 가운데 번역이나 문서 작업 등 사무직 업무 혹은 이미지 생성 등 예술을 비롯한 지적 서비스는 챗GPT를 위시한 생성 AI가 끊임없이 발전하면서 대체될 가능성이 있다는 예측이 나오고 있다. 해당 예측에 따라서 인간이 물리적으로 할 수 있는 활동만 인기를 유지할 수 있을 것이란 분석이다. <br>
이를 토대로 “재능 플랫폼에선 AI가 못 하는 오프라인 재능의 수요가 높아질 것” 이라고 하였다. <br>
이러한 기사를 찾아보며 재능마켓, 재능공유 플랫폼이 수요가 있다고 생각하였으며 성장 가능성 또한 높다고 판단하였다. <br>

하지만, 현 시장에 성황 중인 재능플랫폼들의 문제점도 지적되고있다. <br>
시장조사전문기업 엠브레인 모니터는 전국 만 19~59세 성인남녀 1000명을 대상으로 ‘재능공유 플랫폼’ 관련 인식 조사를 실시 한 결과, 개선이 필요한 몇몇 부분이 지적되었다. <br>
첫째, “경력  강사에게 투자한 가격에 비해, 강의 콘텐츠의 품질이 떨어질 수 있을 것 같다”(71.2%)는 우려 섞인 시선이 나타나 향후 콘텐츠의 전문성과 신뢰도를 보완할 필요가 있음을 알 수 있었다. <br>
둘째, 재능 판매를 원하는 일반인 A씨는 대표적인 재능 플랫폼 ”크몽” 고객센터에서 경력이 없으면 서비스를 등록하는 게 힘들다는 답변을 들었다. <br>

이러한 불편함을 토대로 아래와 같은 개선점을 “모잘” 서비스에 적용하였다.
1. 무경력 일반인들도 서로 재능을 교환할 수 있고, 나눔할 수 있다.
2. 무경력 일반인들도 판매자는 교육의 경력을 쌓을 수 있는 기회, 구매자는 무료로 교육을 받을 수 있는 기회로 차별화를 두었다.


## 5. 재난 복구 계획 시나리오
ketchop팀에서는 서비스의 연속성이 있고 데이터 유실이 거의 없는, 즉시 복구되는 Mirror(active/active) 재해복구 방법을 선택하였다. <br>
한 쪽 서버가 다운되었을 시, 재난복구과정은 다음과 같다.

1. 실시간 데이터 복제 설정 <br>
   - 데이터베이스 복제 소프트웨어 설치 및 설정 <br>
   - 주 DB 서버와 미러 DB 서버 간의 데이터 동기화 주기 설정 (예: 1분 간격) <br>

2. 모니터링 및 장애 감지 <br>
   - DB 서버 상태 모니터링 도구 (예: Nagios, Zabbix) 설치 <br>
   - 장애 발생 시 알림 설정 (SMS, 이메일, 대시보드) <br>

3. 실시간 데이터 복제 설정 <br>
   - 장애 발생 시 자동으로 미러 DB 서버로 트래픽 전환 설정 (로드 밸런서, 자동화 스크립트 활용) <br>
   - 수동 전환 절차도 병행 준비 <br>

4. 실시간 데이터 복제 설정 <br>
   - 장애 발생 시 즉시 미러 사이트로 전환 <br>
   - 복구 팀은 주 DB 서버의 장애 원인 파악 및 문제 해결 <br>

5. 실시간 데이터 복제 설정 <br>
   - 주 DB 서버 복구 및 테스트 완료 후, 미러 DB 서버와 동기화 <br>
   - 데이터 완전 동기화 후 서비스 다시 주 DB 서버로 전환 <br>


<br>

# 📚기능/요구사항/테스트 명세서

<details><summary> <b>1. 기능 명세서</b> </summary>
<p>

</p>
</details>


<summary> <b>2. 요구사항 정의서</b> </summary>
</br>
[요구사항 정의서](https://github.com/beyond-sw-camp/be06-1st-ketchop-mojal/blob/readme/assets/%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD%EC%A0%95%EC%9D%98%EC%84%9C.pdf)
<img src="https://github.com/beyond-sw-camp/be06-1st-ketchop-mojal/blob/readme/assets/image/%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD%EC%A0%95%EC%9D%98%EC%84%9C.png" width="100%" />



<!--
# 📋설계문서
<details><summary> <b>상세보기</b> </summary>
<br>

# 🌀일정 관리

<details><summary> <b>WBS</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/a673d5e7-8022-47fe-a36a-d011a3a64bb0" width="100%" />
</p>
</details>

<br>

# 📝DDD

<details><summary><b>1. Domain event</b></summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/573b10b4-1557-4349-b4d1-8594a7dbc415" width="100%" />
</p>
</details>

<details><summary> <b>2. Command</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/6dd8f2ff-1973-4186-8cc9-40c0f22e1cb9" width="100%" />
</p>
</details>

<details><summary> <b>3. Actor</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/0b22f089-a432-4223-97a4-e7308b5c250d" width="100%" />
</p>
</details>

<details><summary> <b>4. Aggregate</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/6e90a77f-ff4e-44a6-bc11-b6f9f5076757" width="100%" />
</p>
</details>

<details><summary> <b>5. Bounded context</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/8f580e17-3550-47d2-ab81-f6a258689627" width="100%" />
</p>
</details>

<details><summary> <b>6. Context mapping</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/0ab1fd84-6afd-4aa9-af2e-bfdf6275af2a" width="100%" />
</p>
</details>

<details><summary> <b>7. 중간객체 연결</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/b80336ab-4cd5-4e61-9161-2dd320190a2d" width="100%" />
</p>
</details>

---

<br>

# ⚙DB모델링

<details><summary> <b>1. 개념모델링</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/7ea5b6fe-fa98-4051-bf12-89e3fcb3619d" width="100%" />
</p>
</details>

<details><summary> <b>2. 논리모델링</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/239890fa-ea13-4a76-aa86-eb3d9cc2ab6f" width="100%" />
</p>
</details>

<details><summary> <b>3. 물리모델링</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/d5038827-8df7-4001-92fe-d352f35009b2" width="100%" />
</p>
</details>

---

<br>

# 💻와이어 프레임

<details><summary> <b>1. 메인 - 회원 관련 페이지 (로그인)</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/679f6dec-e11e-4897-9d39-4417b851e565" width="100%" />
</p>
</details>

<details><summary> <b>2. 메인 - 회원프로필 및 뱃지 페이지</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/9c09016e-96ff-4184-ac3b-6a202692538a" width="100%" />
</p>
</details>

<details><summary> <b>3. 메인 - 최신 이벤트, 자유 게시글</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/c10de869-47e1-4d35-bc33-c76a6d587089" width="100%" />
</p>
</details>

<details><summary> <b>4. 메인 - 게시판</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/5e583639-7a18-49fe-a63b-8a2e62d9747f" width="100%" />
</p>
</details>

<details><summary> <b>5. 이벤트 게시판</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/7e6bdafc-b561-4043-b41c-5affb629d368" width="100%" />
</p>
</details>

<details><summary> <b>6. 리뷰 게시판</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/d36c26a7-e587-4e40-9d15-5d87df9fcd03" width="100%" />
</p>
</details>

<details><summary> <b>7. 정보 게시판</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/41522f9b-ebe3-4446-b5f1-dda170a25368" width="100%" />
</p>
</details>

<details><summary> <b>8. 자유 게시판</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/e77a0dd9-150c-4288-af70-681dc2b992f6" width="100%" />
</p>
</details>

<details><summary> <b>9. 문의 게시판</b> </summary>
<p>
<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/08a0bbe4-3945-414f-ae53-95a32426508c" width="100%" />
</p>
</details>

---

<br>



---

<br>

# 🅰Api 명세서
<details><summary> <b>1. 리뷰(게시글, 댓글)</b> </summary>

![Swagger Editor_page-0001](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/3e6bf027-0d6a-4978-968a-53c7ac4e5e26)

</details>
<details><summary> <b>2. 신고, 포인트, 회원</b> </summary>
  
![Swagger Editor_page-0002](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/04651a27-575d-405a-9d67-276da2869e9c)

</details>
<details><summary> <b>3. 정보(게시글, 댓글), 자유(게시글, 댓글)</b> </summary>
  
![Swagger Editor_page-0003](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/f99a45af-36d9-4900-8fd2-957f7963a522)

</details>
<details><summary> <b>4. 자유(게시글), 이벤트(게시글), 이메일, 뱃지 </b> </summary>
  
![Swagger Editor_page-0004](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/d3d3c429-8a66-487e-8c19-d6a52ad97ad8)

</details>

<details><summary> <b>5. 게시글 좋아요</b> </summary>
  
![Swagger Editor_page-0005](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/cf4b5914-31e5-4d39-b827-dff92946ada5)

</details>

<details><summary> <b>6. 스키마 </b> </summary>
  
![Swagger Editor_page-0006](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/b11e27c2-09f5-4e38-95ff-aaf423645079)
![Swagger Editor_page-0007](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/da423192-22f1-49e0-a882-e2376ec2405f)

</details>

---

<br>

# ✔백엔드 테스트

<details>
<summary> <b>1. 회원</b> </summary>

![백엔드테스트10](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/cf12a37e-64ef-4c97-bb5d-8c38e892582b)

</details>

<details>
<summary> <b>2. 정보 게시글</b> </summary>
  
![백엔드테스트8](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/ab0fcd21-8097-497c-9a04-914c26bc6a49)

</details>

<details>
<summary> <b>3. 정보 게시글 댓글</b> </summary>
  
![백엔드테스트9](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/f54bd183-6f90-4a8c-b157-749dbc3861b3)

</details>

<details>
<summary> <b>4. 자유 게시글</b> </summary>

![백엔드테스트7](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/e9023879-71d0-4c33-a820-1260d77cf45f)

</details>

<details>
<summary> <b>5. 자유 게시글 댓글</b> </summary>
  
![백엔드테스트6](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/b8b612a7-0a78-4458-ab94-9f42cffe94dd)

</details>

<details>
<summary> <b>6. 리뷰 게시글</b> </summary>
  
![백엔드테스트1](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/687fcb2c-7cae-46ab-8172-0262a9ff70e1)

</details>

<details>
<summary> <b>7. 리뷰 게시글 댓글</b> </summary>

![백엔드테스트2](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/96424f1e-e733-42cb-b73f-7ea32e085a67)

</details>

<details>
<summary> <b>8. 이벤트 게시글</b> </summary>

![백엔드테스트4](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/79c7707f-aa47-4967-ae44-7f7d1efff783)

</details>

<details>
<summary> <b>9. 뱃지</b> </summary>

![백엔드테스트3](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/aff0b53c-9bc9-4e45-876e-eec9de636543)

</details>

<details>
<summary> <b>10. 신고</b> </summary>

![백엔드테스트4](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/79c7707f-aa47-4967-ae44-7f7d1efff783)

</details>
</details>

-->

<br>

# 🐸ERD
<img src="https://github.com/beyond-sw-camp/be06-1st-ketchop-mojal/blob/readme/assets/image/mojal_wb.png" width="60%" />
<img src="https://github.com/beyond-sw-camp/be06-1st-ketchop-mojal/blob/readme/assets/image/mojal_erdclode.png" width="100%" />

<br>


<br>

# 🐳시스템 아키텍처
<img src="https://github.com/beyond-sw-camp/be06-1st-ketchop-mojal/blob/dev/assets/image/%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98.png" width="80%" />

---

<br>
<!--
# 📎전제 조건 및 설치 환경
이 프로젝트를 시작하기 전에 다음 소프트웨어와 도구가 설치되어 있어야 합니다.

- **IntelliJ**: JDK 17 설치 필요
- **Docker**: 버전 4.28
- **Jenkins**: 버전 2.452
- **Kubernetes**: 버전 1.92.2
- **Ngrok**
- **Webhook**: GitHub와 연동 설정

---

<br>

# 🔧Credential 설정
안전한 개발을 위해 다음 크리덴셜을 설정합니다.

1. **MY-GITHUB-KEY**: RSA 키
2. **DOCKERHUB-PASSWORD**: Docker Hub 업로드를 위한 계정 정보
3. **SECRET-ID**: GitHub에 업로드되면 안 되는 `application.yml`

---

<br>

# 🔗Jenkins Pipeline 설정
## Git 저장소와 Webhook 연결
- 변경사항 감지 후 Jenkins가 자동으로 빌드를 시작합니다.

<br>

## RSA 키 생성
- Jenkins가 Webhook을 통해 변경된 소스 코드를 감지하고, SSH에 사용될 RSA 키를 생성합니다.

<br>

## Pipeline 생성 및 설정
- Jenkins Tools에서 `Java (OpenJDK 17)` 및 `Gradle (ver 8.7)` 설정

<br>

## Plugin 설치
- `Publish Over SSH` 및 `Pipeline: Stage View` 설치

<br>

## Pipeline 스크립트

<details><summery>중요코드</summery>
    
```groovy
pipeline {
    agent any
    tools {
        gradle 'gradle'
        jdk 'openJDK17'
    }
    environment {
        DOCKERHUB_USERNAME = 'angelajsb'
        GITHUB_URL = 'https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE-CICD.git'
    }
    stages {
        stage('Preparation') {
            steps {
                script {
                    sh 'docker --version' // Docker가 설치되어 있는지 확인
                }
            }
        }
        stage('Source Build') {
            steps {
                git branch: 'main', url: 'https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE-CICD.git'
                
                withCredentials([file(credentialsId: 'secret-id', variable: 'applicationYml')]) {
                    script {
                        if (fileExists('src/main/resources/application.yml')) {
                            sh 'rm src/main/resources/application.yml' // 파일이 존재하면 삭제
                        }
                        sh "cp $applicationYml src/main/resources/application.yml"
                    }
                }
                
                sh "chmod +x ./gradlew"
                sh "./gradlew clean build"
            }
        }
        stage('Container Build') {
            steps {
                sh "cp ./build/libs/*.jar ."
    
                sh "docker build -t ${DOCKERHUB_USERNAME}/cine-verse:latest ."

                withCredentials([usernamePassword(credentialsId: 'DOCKERHUB_PASSWORD', usernameVariable: 'DOCKERHUB_USER', passwordVariable: 'DOCKERHUB_PASS')]) {
                    sh "echo $DOCKERHUB_PASS | docker login --username $DOCKERHUB_USER --password-stdin"
                    sh "docker push ${DOCKERHUB_USERNAME}/cine-verse:latest"
                }
            }
        }
    }
}
```

</details>

<br>

## Jenkins Pipeline 실행 과정
1. 변경 코드 GitHub에 업로드
2. Webhook 통해 변화 감지
3. 감지된 코드를 SSH를 통해 보안 상태로 Jenkins에서 클론
4. 사전에 Credential에 등록한 `application.yml`을 Pipeline 스크립트에 작성된 Groovy 문법을 통해 다운로드
5. 빌드 및 테스트 실행(자동화 과정)
6. 빌드된 JAR 파일을 통해 이미지 생성 후 Docker Hub에 푸시

<br>

## deployment.yml 생성
<details><summery>yml 내용</summery>

```
apiVersion: apps/v1
kind: Deployment
metadata:
  name: boot002dep
spec:
  selector:
    matchLabels:
      app: boot002kube
  replicas: 3
  template:
    metadata:
      labels:
        app: boot002kube
    spec:
      containers:
        - name: boot-container
          image: angelajsb/cine-verse:latest    # DockerHub에 푸쉬된 가장 최근 image 사용
          imagePullPolicy: Always    
          ports:
            - containerPort: 8081        # 현재 boot project 포트번호
```

</details>

<br>

## service.yml
<details><summery>yml 내용</summery>    

```
apiVersion: v1
kind: Service
metadata:
  name: boot002ser
spec:
  type: NodePort
  ports:
    - port: 8081                        # container 내부 통신 포트번호
      targetPort: 8081                  # 현재 service 중인 포트번호
      protocol: TCP
      nodePort: 30007                   # 외부 접속 포트번호
  selector:
    app: boot002kube
```

</details>

<br>

## Kubernetes
1. deployment.yml -> pod를 생성하고 관리하는 정보 정의
2. replicas -> 설정한 갯수에 따라 pod instance 유지, 과부하가 걸리거나 실패한 pod를 자동 재시작 해 항상 n개의 pods 유지
3. service.yml -> pod에 대한 단일 접점 제공 및 내부적으로 로드 밸런싱 수행
4. deployment.yml 및 service.yml 적용
        kubectl apply -f boot002dep.yml
        kubectl apply -f boot002ser.yml
5. 소스코드 변경 시 Kubernetes 재시작
        kubectl rollout restart deployment/boot002dep

<br>        

## Vue CI/CD
1. 전제 조건 및 설치 환경
    1. VS CODE 설치
    2. VUE3 설치
    3. Docker Desktop 설치

2. vue project 경로 터미널에서 해당 project image 생성
```
docker build -t angelajsb/cine-verse-front .
```

3. DockerHub에 해당 image 푸쉬
```
docker push angelajsb/cine-verse-front
```

4. deployment.yml 생성

5. service.yml 생성

6. deployment.yml 및 service.yml 적용 (명령어 입력)

```
kubectl apply -f vue002dep.yml
kubectl apply -f vue002ser.yml
```

7. 소스코드 변경 시 이미지 재생성 후 DockerHub 푸쉬
```
docker build -t angelajsb/cine-verse-front:latest .
docker push angelajsb/cine-verse-front:latest
```

8. Kubernetes 재시작
```
kubectl rollout restart deployment/vue002dep
```

--- 

<br>

# ✅추가 기능 설명서

## 1. CGV 실시간 인기 영화 순위 크롤링

Python을 사용하여 requests와 BeautifulSoup 라이브러리로 CGV에서 영화 데이터(실시간 인기 영화 순위 10)를 크롤링하고 json으로 저장
메인 화면에 들어가면 사용자는 실시간 영화 정보를 통해 최신 트렌드를 파악 가능


<details><summary> <b>중요코드</b> </summary>
    
```
url = 'http://www.cgv.co.kr/movies/'
res = requests.get(url)
soup = BeautifulSoup(res.text, 'html.parser')
```
</details>

<br>

## 2. OpenAI API를 이용한 챗봇 만들기
![API request 조회 가능](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/fec60701-b45c-4134-9698-ab42b216d66d)

JavaScript를 사용하여 OpenAI의 API로부터 챗봇의 응답을 받아 처리하는 기능 구현
api 키는 .env 환경변수 처리를 통해 외부에 노출되지 않도록 보안 처리
영화 추천 등 다양한 주제에 대한 빠르고 효율적인 대화 가능
https://platform.openai.com/usage에서 API request 조회 가능



<details><summary> <b>중요코드</b> </summary>

```
async function sendMessage() {
  const message = userMessage.value.trim();
  if (message.length === 0) return;
```
</details>

<br>

## 3. S3 서버 이용한 다중 이미지 업로드

Java와 Spring Boot를 사용하여 AWS S3에 이미지 파일을 업로드하고 관리하는 기능 구현
안정적인 AWS S3를 사용함으로써 대용량 이미지 저장 및 관리 용이하고, 데이터 보안 강화


<details><summary> <b>중요코드</b> </summary>

```
@Bean
    public AmazonS3Client amazonS3Client() {
        BasicAWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);

        return (AmazonS3Client) AmazonS3ClientBuilder.standard()
                .withCredentials(new AWSStaticCredentialsProvider(credentials))
                .withRegion(region)
                .build();
    }

try {
            ObjectMetadata objectMetadata = new ObjectMetadata();
            objectMetadata.setContentType(multipartFile.getContentType());
            objectMetadata.setContentLength(multipartFile.getInputStream().available());

            amazonS3Client.putObject(bucketName, storedName, multipartFile.getInputStream(), objectMetadata); 

            String accessUrl = amazonS3Client.getUrl(bucketName, storedName).toString();
            image.setAccessUrl(accessUrl);
            imageRepository.save(image); 
        }
```

</details>

<br>

## 4. SMTP를 활용한 인증 이메일 발송 및 비밀번호 변경

SMTP를 통해 사용자의 이메일로 비밀번호 재설정 인증용 난수를 보내고 비밀번호 변경 기능 구형
이메일을 통해 사용자가 안전하게 자신의 계정을 관리할 수 있으며, 서비스에 대한 신뢰성이 향상


<details><summary> <b>중요코드</b> </summary>
    
```
public EmailMessage sendMail(EmailMessage emailMessage) {
        MimeMessage mimeMessage = javaMailSender.createMimeMessage();
        try {
            MimeMessageHelper mimeMessageHelper = new MimeMessageHelper(mimeMessage, false, "UTF-8");

            String newPwd = createRandom();
            mimeMessageHelper.setTo(emailMessage.getTo());
            mimeMessageHelper.setSubject("비밀번호 재설정");
            mimeMessageHelper.setText("재설정된 비밀번호: " + newPwd);
            mimeMessageHelper.setFrom(new InternetAddress(from));

            javaMailSender.send(mimeMessage);
            memberService.changePwd(newPwd, emailMessage.getTo());

            emailMessage.setMessage("재설정된 비밀번호: " + newPwd);
            emailMessage.setSubject("비밀번호 재설정");

            return emailMessage;
        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }
```

</details>

---
<br>

# ✨서비스 테스트 결과 영상

<details>
<summary> <b>1️⃣ 메인페이지 etc</b> </summary>
<br>

<details>
<summary> <b>1-1. 메인페이지 라우터</b> </summary>

<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/f2e0df14-21b5-401a-a3de-72ba0381be48" width="100%" />
  
</details>

<details>
<summary> <b>1-2. 메인페이지 인기 영화 순위</b> </summary>

<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/9a70c400-cdbe-46f3-a766-e3d32fcbd7bf" width="100%" />
  
</details>

<details>
<summary> <b>1-3. 최신 이벤트/자유 게시글</b> </summary>

<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/a14e42fb-e0c1-4c41-b5b1-468ec24fcbd2" width="100%" />

</details>

</details>


<details>
<summary> <b>2️⃣ 챗봇</b> </summary>

![챗봇-테스트](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/dabf9559-90d2-449c-aa08-ad64fa271ed3)

</details>


<details>
<summary> <b>3️⃣ 회원 etc</b> </summary>
<br>
  
<details>
<summary> <b>3-1. 회원가입</b> </summary>
  
![회원가입-테스트](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/8c69e09b-54e7-44e2-81fd-cd706073f6dc)

</details>

<details>

<summary> <b>3-2. 아이디, 비밀번호 찾기</b> </summary>

<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/3d2f435e-8bd1-4a7a-b296-a9306f678235" width="100%" />

</details>

<details>
<summary> <b>3-3. 로그인 로그아웃</b> </summary>

![로그인로그아웃-테스트](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/0fbae4fc-c65a-4913-ac97-1a73e897692a)

</details>

<details>
<summary> <b>3-4. 회원정보 수정</b> </summary>

![회원정보수정-테스트](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/d7c9296e-f268-4897-a08f-ebdd0e1bef8c)

</details>

<details>
<summary> <b>3-5. 회원프로필 확인</b> </summary>

![유저프로필-테스트](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/372eeac5-4f7c-4305-aab4-284718326b47)

</details>

<details>
<summary> <b>3-6. 회원 탈퇴</b> </summary>

<img src="https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/b463b95f-a0d4-49d6-89d8-f2bb1c528120" width="100%" />

</details>

</details>


<details>
<summary> <b>4️⃣ 뱃지</b> </summary>

![뱃지-테스트](https://github.com/beyond-sw-camp/be04-4th-6team-CINE-VERSE/assets/153909291/821a4331-f081-4573-8b8b-77b275b29db8)

</details>


<details>
<summary> <b>5️⃣ 정보 게시판 etc</b> </summary>
<br>
  
<details>
<summary> <b>5-1. 정보(자유) 게시글 전체/단일 조회</b> </summary>
  
![게시글 전체 조회 단일 조회](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/88094177-9b70-49e2-b1af-bb3923ff8cc1)

</details>

<details>
<summary> <b>5-2. 정보 게시글 작성</b> </summary>

  ![정보 게시물 작성](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/a241020e-b393-467b-80ae-8e2a10d4ccb0)

</details>

<details>
<summary> <b>5-3. 정보 게시글 삭제</b> </summary>

![정보 게시물 삭제](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/44198048-2b47-4905-b323-49a6535c3945)

</details>

<details>
<summary> <b>5-4. 정보 게시글 검색</b> </summary>

![정보 게시물 검색](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/c7d66ab2-7410-4b6f-9128-5f5e7963ac08)

</details>

</details>


<details>
<summary> <b>6️⃣ 자유 게시판 etc</b> </summary>
<br>

<details>
<summary> <b>6-1. 자유 게시글 작성</b> </summary>

![자유 게시물 작성](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/68edf6d6-9dd8-49f1-8abe-98aecd5110d9)
  
</details>

<details>
  
<summary> <b>6-2. 자유 게시글 삭제</b> </summary>

![자유게시글 삭제](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/2d91542f-aeeb-46af-a5b4-1d4769affde0)
  
</details>

<details>

<summary> <b>6-3. 자유 게시글 검색</b> </summary>

![자유 게시글 검색](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/727baa9d-6030-45ec-a1b9-4d9e3dd3eb63)

</details>

</details>


<details>
<summary> <b>7️⃣ 이벤트 게시판 etc</b> </summary>
<br>

<details>

<summary> <b>7-1. 이벤트 게시글 이동 전체 조회 단일 조회</b> </summary> 

![이벤트 게시글 이동 전체 조회 단일 조회](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/7ce8d265-3082-48a6-8778-9f7c53ce5ab1)

</details>

<details> 
  
<summary> <b>7-2. 이벤트 게시판 작성</b> </summary> 

![이벤트 작성](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/eac92e3b-e6ce-45bd-b8e8-9f837ca8ef06)

</details>

<details>

<summary> <b>7-3. 이벤트 게시판 삭제</b> </summary>

![이벤트 게시글 삭제](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/19c4e1bc-15a2-49a8-916b-d731eb3022bc)

</details>

<details>

<summary> <b>7-4. 이벤트 게시판 참여</b> </summary>


![이벤트 참여](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/ff124f91-bf94-4e3b-a576-229ee3059aa8)


</details>

</details>

<details>
<summary> <b>8️⃣ 댓글 etc</b> </summary>
<br>

<details>

<summary> <b>8-1. 댓글 작성</b> </summary>

![댓글 작성](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/47b6aa50-8b5c-4200-beb4-7b333bc858e4)

</details>

<details>

 <summary> <b>8-2. 댓글 삭제</b> </summary>

![댓글 삭제](https://github.com/beyond-sw-camp/be04-3rd-TeamPhoenix-ahub/assets/113569573/dff38ba4-8f92-49de-a680-6342252f9ad8)
 
</details>

</details>

# 🌐고도화 예정 기술

1. 이벤트 게시판 투표 구현
2. spring security 적용
3. redis를 통한 이메일 인증
4. 댓글 이모티콘 구현
5. 스포일러 방지 구현
6. 게시글 수정(프론트)
7. 회원신고
8. qna

-->






